# 🎁 Chapter 15. 디자인 패턴과 프레임워크
디자인 패턴은 특정한 변경을 일관성 있게 다룰 수 있는 협력 템플릿을 제공하며, 프레임워크는 특정한 변경을 일관성 있게 다룰 수 있는 확장 가능한 코드 템플릿을 제공한다. 또한 디자인 패턴이 협력을 일관성 있게 만들기 위해 재사용할 수 있는 설계의 묶음이라면, 프레임워크는 일관성 있는 협력을 제공하는 확장 가능한 코드라고 할 수 있다.

- `디자인 패턴`
	- 소프트웨어 설계에서 반복적으로 발생하는 문제에 대해 반복적으로 적용할 수 있는 해결 방법으로 다양한 변경을 다루기 위해 반복적으로 재사용할 수 있는 설계의 묶음이다. (설계의 재사용)
- `프레임워크`
	- 애플리케이션의 아키텍처를 구현 코드의 형태로 제공한다. (설계와 코드를 함께 재사용)
    
## 🥑 디자인 패턴과 설계 재사용
### 🍞 소프트웨어 패턴
패턴이란 무엇인가를 논의할 때면 반복적으로 언급되는 몇 가지 핵심적인 특징이 있다.

1. 패턴은 반복적으로 발생하는 문제와 해법의 쌍으로 정의된다.
2. 패턴을 사용함으로써 이미 알려진 문제와 이에 대한 해법을 문서로 정리할 수 있으며, 
이 지식을 다른 사람과 의사소통할 수 있다.
3. 패턴은 추상적인 원칙과 실제 코드 작성 사이의 간극을 메워 주며 실질적인 코드 작성을 돕는다.
4. 패턴의 요점은 패턴이 실무에서 탄생했다는 점이다.

- 패턴은 한 컨텍스트에서 유용한 동시에 다른 컨텍스트에서도 유용한 `아이디어`다.
- 패턴이 지닌 가장 큰 가치는 경험을 통해 축적된 실무 지식을 효과적으로 요약하고 전달할 수 있다는 점이다.
- 마틴 파울러가 언급한 것처럼 패턴의 범위가 소프트웨어 개발과 직접적인 연관성을 가진 분석, 설계, 구현 영역만으로 한정되는 것은 아니다. 다양한 크기의 프로젝트 조직을 구성하는 방법, 프로젝트 일정을 추정하는 방법, 스토리 카드나 백로그를 통해 요구사항을 관리하는 방법과 같이 반복적인 규칙을 발견할 수 있는 모든 영역이 패턴의 대상이 될 수 있다.
- 패턴은 홀로 존재하지 않는다. 특정 패턴 내에 포함된 컴포넌트와 컴포넌트 간의 관계는 더 작은 패턴에 의해 서술될 수 있으며, 패턴들을 포함하는 더 큰 패턴 내에 통합될 수 있다.
	- 크리스토퍼 알렉산더는 연관된 패턴들의 집합들이 모여 하나의 `패턴 언어(Pattern Language)`를 구성한다고 정의하고 있다.
    - `POSA1[Buschman96]`에서는 패턴 언어라는 용어가 지닌. 제약 조건을 완화하기 위해 `패턴 시스템(Pattern System)`이라는 특수한 용어의 사용을 제안하기도 했으나 현재 두 용어는 거의 동일한 의미로 사용되고 있다.
    
### 🍞 패턴 분류
패턴을 분류하는 가장 일반적인 방법은 패턴의 범위나 적용 단계에 따라 `아키텍처 패턴(Architecture Pattern)`, `분석 패턴(Analysis Pattern)`, `디자인 패턴(Design Pattern)`, `이디엄(Idiom)`으로 분류한다.

- `분석 패턴`: 도메인 내의 개념적인 문제를 해결하는 데 초점을 맞춘다.
- `디자인 패턴`: 중간 규모의 패턴으로 특정한 설계 문제를 해결하는 것을 목적으로 하며, 프로그래밍 언어나 프로그래밍 패러다임에 독립적이다.
- `이디엄`: 특정 프로그래밍 언어에만 국한된 하위 레벨 패턴으로, 주어진 언어의 기능을 사용해 컴포넌트, 혹은 컴포넌트 간의 특정 측면을 구현하는 방법을 서술한다.

아키텍처 패턴, 디자인 패턴, 이디엄이 주로 기술적인 문제를 해결하는 데 초점을 맞추고 있다면 분석 패턴은 도메인 내의 개념적인 문제를 해결하는 데 초점을 맞춘다. 분석 패턴은 업무 모델링 시에 발견되는 공통적인 구조를 표현하는 개념들의 집합이다. 분석 패턴은 단 하나의 도메인에 대해서만 적절할 수도 있고 여러 도메인에 걸쳐 적용할 수도 있다.

### 🍞 패턴과 책임-주도 설계
> Strategy 패턴의 목적은 알고리즘의 변경을 캡슐화하는 것이고 이를 구현하기 위해 객체 합성을 이용한다.

![](https://velog.velcdn.com/images/elbin/post/8d983b66-cc04-46bd-8f08-5c6e4583e482/image.png)

영화 예매 시스템의 경우 객체 합성을 이용한 `Strategy 패턴`을 적용한 예시다. `Strategy 패턴`의 목적은 알고리즘의 변경을 캡슐화하는 것이다.

여기서 변하지 않는 부분은 `Movie`고 변하는 부분은 `AmountDiscountMovie`와 `PercentDiscountMovie`다. 그리고 변경하지 않는 부분은 부모 클래스로, 변하는 부분은 자식 클래스로 분리함으로써 변경을 캡슐화한다. 

이처럼 알고리즘을 캡슐화하기 위해 합성 관계가 아닌 상속 관계를 사용하는 것을 `TEMPLATE METHOD`라고 부른다.

- `Strategy 패턴`을 이용하면 `Movie`와 `DiscountPolicy` 사이의 결합도를 낮게 유지할 수 있기 때문에 런타임에 알고리즘을 변경할 수 있다.
- 변경하지 않는 부분은 부모 클래스로, 변하는 부분은 자식 클래스로 분리함으로써 변경을 캡슐화한다.

![](https://velog.velcdn.com/images/elbin/post/52cd4cd5-4a6d-438c-b6e3-b12fb4dff364/image.png)

핸드폰 과금 시스템 설계는 `DECORATOR 패턴`을 기반으로 한다. `DECORATOR 패턴`은 객체의 행동을 동적으로 추가할 수 있게 해주는 패턴으로 기본적으로 객체의 행동을 결합하기 위해 객체 합성을 사용한다. `DECORATOR 패턴`은 선택적인 행동의 개수와 순서에 대해 변경을 캡슐화할 수 있다.

![](https://velog.velcdn.com/images/elbin/post/5fae4045-d079-44b1-9fdb-c778bd95bd78/image.png)

- 대부분의 디자인 패턴의 목적은 특정한 변경을 캡슐화함으로써 유연하고 일관성 있는 협력을 설계할 수 있는 경험을 공유하는 것.
- 디자인 패턴에서 중요한 것은 디자인 패턴의 구현 방법이나 구조가 아니다. 어떤 디자인 패턴이 어떤 변경을 캡슐화하는지를 이해하는 것이 중요하다.
- 그리고 각 디자인 패턴이 변경을 캡슐화하기 위해 어떤 방법을 사용하는지를 이해하는 것이 더 중요하다.

## 🥑 프레임워크와 코드 재사용
### 🍞 코드 재사용 대 설계 재사용
디자인 패턴은 프로그래밍 언어에 독립적으로 재사용 가능한 설계 아이디어를 제공하는 것을 목적으로 한다. 따라서 언어에 종속적인 구현 코드를 정의하지 않기 때문에 디자인 패턴을 적용하기 위해서는 설계 아이디어를 프로그래밍 언어의 특성에 맞춰 가공해야 하고 매번 구현 코드를 재작성해야 한다는 단점이 있다.

> **🙋🏻‍♂️개인적인 견해**
>
> 해당 단점은 디자인 패턴의 장점과 비교해 큰 문제가 되지 않다고 생각한다. 디자인 패턴은 이미 검증된 설계 아이디어를 제공하기 때문에 소프트웨어 개발자들이 새로운 애플리케이션을 설계하거나 기존 코드를 개선하는 데 큰 도움을 준다. 디자인 패턴을 이해하고 활용하는 것은 프로그래밍 언어에 종속적인 구현 코드를 작성하는 것보다 더 많은 시간과 비용을 절감할 수 있으며, 유지 보수성과 확장성을 개선할 수 있다.

가장 이상적인 형태의 재사용 방법은 설계 재사용과 코드 재사용을 적절한 수준으로 조합하는 것이다.
코드 재사용만을 강조하는 컴포넌트는 실패했다. 추상적인 수준에서의 설계 재사용을 강조하는 디자인 패턴은 재사용을 위해 매번 유사한 코드를 작성해야만 한다. 설계를 재사용하면서도 유사한 코드를 반복적으로 구현하는 문제를 피하는 방법은 `프레임워크`다.

해당 교재에서 언급되고 있는 프레임워크의 정의는 다음과 같다.
- "추상 클래스나 인터페이스를 정의하고 인스턴스 사이의 상호작용을 통해 시스템 전체 혹은 일부를 구현해 놓은 재사용 가능한 설계"
- "애플리케이션 개발자가 현재의 요구사항에 맞게 커스터마이징할 수 있는 애플리케이션의 골격"

프레임워크는 코드를 재사용함으로써 설계 아이디어를 재사용한다. 프레임워크는 애플리케이션의 아키텍처를 제공하며 문제 해결에 필요한 설계 결정과 이에 필요한 기반 코드를 함께 포함한다. 또한 애플리케이션을 확장할 수 있도록 부분적으로 구현된 추상 클래스와 인터페이스 집합뿐만 아니라 추가적인 작업 없이도 재사용 가능한 다양한 종류의 컴포넌트도 함께 제공한다.

> **🙋🏻‍♂️ 개인적인 견해**
>
> 프레임워크를 사용하면서도 일부 제한이 있을 수 있다. 예를 들어, 프레임워크의 규칙에 따라 개발을 해야 하기 때문에 개발자가 자유롭게 코드를 작성할 수 없는 경우가 있다. 
>
> 또한 프레임워크를 사용하다 보면 프레임워크 내부의 코드와 상호작용하며 개발해야 하는 경우가 있기 때문에 이를 이해하고 처리하기 위한 추가적인 노력이 필요할 수도 있다.

### 🍞 제어 역전 원리
- 객체지향과 전통적인 설계 방법을 구분 짓는 가장 핵심적인 원리는 의존성 역전 원리다.
- 의존성 역전 원리는 프레임워크의 가장 기본적인 설계 메커니즘으로 의존성의 방향뿐만 아니라 제어 흐름의 주체 역시 역전시킨다.
  - 의존성을 역전시킨 객체지향 구조에서는 프레임워크가 애플리케이션에 속하는 서브 클래스의 메서드를 호출한다.
	- 따라서 프레임워크를 사용할 경우 개별 애플리케이션에서 프레임워크로 제어 흐름의 주체가 이동한다. 즉, 의존성을 역전시키면 제어 흐름의 주체 역시 역전된다. 이를 `제어 역전(Inversion of Controller)` 또는 `할리우드(Hollywood) 원리`라고 한다.
- 프레임워크에서는 일반적인 해결책만 제공하고 애플리케이션에 따라 달라질 수 있는 특정한 동작은 비워둔다. 이렇게 완성되지 않은 채로 남겨진 동작을 `훅(hook)`이라고 부른다. 
- `훅`의 구현 방식은 애플리케이션의 컨텍스트에 따라 달라진다.
  - 예를 들어 웹 프레임워크에서는 HTTP 요청 처리 과정에서 필요한 동작을 비워둘 수 있으며, 이러한 동작을 사용자가 구현하는 인터페이스를 제공한다. 이때, 인터페이스를 구현하는 방식은 사용하는 웹 프레임워크에 따라 다를 수 있다.

### ✍🏻 Writer
|한빈|
|:------:|
|<img src="https://user-images.githubusercontent.com/83414134/205510201-c712f541-ec21-4823-bb0d-4b784046bea3.png" width="150" height="150">|
|[dh3183](https://github.com/dh3183)|